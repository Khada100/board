<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title th:text="${board.title} + ' - 상세보기'">게시글 상세보기</title>
    <link rel="stylesheet" th:href="@{/css/detail.css}">
</head>
<body>
<div class="container">
    <input type="hidden" id="postCode" th:value="${board.postCode}">
    <h1 th:text="${board.title}">제목</h1>
    <div class="post-details">
        <p><strong>작성자:</strong> <span th:text="${board.writer}" id="writer"></span></p>
        <p><strong>작성일:</strong> <span th:text="${board.writeDateTime}"></span></p>
        <p><strong>조회수:</strong> <span th:text="${board.recommend}"></span></p>
    </div>
    <div class="post-content">
        <p th:text="${board.detail}">게시글 내용</p>
    </div>
    <div class="comment-section">
        <h2>댓글 달기</h2>
        <textarea id="comment" rows="4" placeholder="댓글을 입력하세요..." required></textarea>
        <button class="submit-comment" onclick="submitComment()">댓글 작성</button>
    </div>
    <div class="comments-list">
        <h2>댓글 목록</h2>
        <ul>
            <li>첫 번째 댓글 내용입니다.</li>
            <li>두 번째 댓글 내용입니다.</li>
            <li>세 번째 댓글 내용입니다.</li>
        </ul>
    </div>
    <div class="button-container">
        <a th:href="@{/board/edit/{postCode}(postCode=${board.postCode})}" class="edit-button">수정</a>
        <a onclick="deleteBoard()" class="delete-button">삭제</a>
        <a th:href="@{/}" class="back-button">목록으로</a>
    </div>
</div>

<script>
    function deleteBoard(){
        const postCodeValue = document.getElementById("postCode").value;
        // 삭제하시겠습니까? 추가
        fetch('/board/delete/' + postCodeValue,{
            method: 'POST'
        }).then(response =>{
            console.log("response : " , response)
            if (response.ok){
                window.location.href = "/";
            }else{
                console.error('게시글 삭제 실패')
            }
        }).catch(error => {
            console.error('오류가 발생하였습니다 : ' , error);
        })
    }
</script>
</body>
</html>